{% extends "base.html" %}

{% block title %} Publish a Ride {% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4">Publish a Ride</h2>
    
    <form method="POST" class="custom-form">
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="from_location" class="form-label">From:</label>
                <input type="text" id="from_location" name="from_location" class="form-control" autocomplete="off" required>
            </div>
            <div class="col-md-6">
                <label for="to_location" class="form-label">To:</label>
                <input type="text" id="to_location" name="to_location" class="form-control" autocomplete="off" required>
            </div>
        </div>

        <!-- Category Dropdown (Detect Change) -->
        <label for="category">Category:</label>
        <select id="category" name="category" class="form-control">
            <option value="one-time">One-Time</option>
            <option value="commuting">Commuting</option>
        </select>

        <!-- One-Time Ride: Show Date & Time Picker -->
        <div class="row mb-3" id="date_time_div">
            <div class="col-md-12">
                <label for="date_time">Date & Time:</label>
                <input type="text" id="date_time" name="date_time" class="form-control" placeholder="Select a date and time">
            </div>
        </div>

        <!-- Commuting Ride: Show Recurrence Dates & Time Slots -->
        <div class="row mb-3" id="recurrence_section" style="display: none;">
            <div class="col-md-12">
                <label for="recurrence_dates">Select Recurring Commute Dates:</label>
                <input type="text" id="recurrence_dates" name="recurrence_dates" class="form-control" placeholder="Select commute dates">
                <small>Select multiple dates the ride will be available.</small>
            </div>
        </div>

        <div class="row mb-3" id="commute_times_section" style="display: none;">
            <div class="col-md-12">
                <label for="commute_times">Select Available Commute Time Slots:</label>
                <input type="text" id="commute_times" name="commute_times" class="form-control" placeholder="Select time slots">
                <small>Select multiple time slots (e.g., 08:00, 17:30).</small>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-3">
                <label for="available_seats" class="form-label">Available Seats:</label>
                <input type="number" id="available_seats" name="available_seats" min="1" class="form-control" required>
            </div>
            <div class="col-md-3">
                <label for="price_per_seat" class="form-label">Price per Seat (Â£):</label>
                <input type="number" id="price_per_seat" name="price_per_seat" step="0.01" class="form-control" required>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-6">
                <label for="driver_name" class="form-label">Driver Username:</label>
                <input type="text" id="driver_name" name="driver_name" value="{{ current_user.username }}" class="form-control" readonly required>
            </div>
        </div>

        <div class="text-center">
            <button type="submit" class="btn btn-base btn-one btn-lg">Publish Ride</button>
        </div>
    </form>
</div>
{% endblock %}